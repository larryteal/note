一 分支规范
1.【强制】所有仓库默认包含三个分支：master， develop， release。其中 develop 用于开发，release 用于测试和 Bug 修复，master 用于生产发布。
开发：统一在 develop 等开发系列分支上进行。
测试：提测时将相关开发分支统一合并到 release 分支，之后的 Bug 修复等都在 release 上进行。
上线：发布时将 release 分支合并至 master 并由运维对 master 中的代码进行发布。发布标签（版本或时间或其他特征）需要打在 master 分支上。发布后需要把 release 分支合并到 develop 等相关开发分支中。

2.【强制】所有分支命名禁止拼音与英文混杂的形式。
说明：正确的英文拼写和语法可以让阅读者易于理解，避免歧义。注意，即使纯拼音命名方式也要避免采用。 
反例：dazhepromotion
正例：jd tiaobao hangzhou 等通用名称，可视为英文。

3.【强制】分支名应全部由小写和横线（-）组成，不能采用其他字符。在英文单词间，应用横线进行拆分。
示例：feature-red-packet-rain 红包雨项目开发分支

4.【强制】新功能开发分支统一命名前缀为 feature，新功能开发时因新建立对应的开发分支。功能开发完成，项目完结后，相关分支可酌情进行清理、删除。
示例：feature-search-2.0， feature-shop-roles

5.【强制】新功能分支应从 master 的最近一次发布提交点拉出。

6.【强制】热修复分支统一命名前缀为 hotfix，当需要进行热修复时，根据对应的问题，建立相应的热修复分支。完成修复后，根据实际情况，将分支合并到 release 或 master 。
说明：如果问题较为严重、紧急，测试可直接在热修复分支上进行测试，之后直接合并生产进行发布。如果较为轻微，可考虑合并入 release 分支，待下次上线时进行发布。
说明：对于常规更新一类的多个问题合并修复的情况，可以采用一个分支进行修复。
示例：hotfix-pay-failed，hotfix-item-tax-lost

7.【强制】热修复分支应选择最后一次生产发布的版本，从 master 分支中拉出。

8.【推荐】在不同功能或项目的分支合并过程中，应该使用 no fast forward 模式，产生新的提交。
说明：独立的合并提交能够让分支关系树更加清晰，利于观察，可以使分支管理、代码回退等工具变得更加轻松。

9.【参考】分支切换流程，可参考 git flow 最佳实践。

 

 

二 发布规范
1.【强制】提测流程（主干测试）。
场景说明：下次发布需要上线的项目，需要进行测试的，需合并到 release 分支上进行。
分支合并：提测前需确保线上最新的代码（master 分支最后一次发布）已经合并到开发分支。提测时（或已在开发分支完成测试，合并待发布分支进行回归时），需将对应的开发分支合并到 release，合并时务必使用 no fast forward 模式，产生新的提交，并按要求填写提交备注。
提交备注：合并提交需要注明来源的开发分支（或热修复等其他类型分支）的分支名，分支的内容，合并的时间。
备注范例：
合并测试：feature-xxx
合并时间：2018.01.01
分支内容：
1. 开发 xxx
2. 修复 yyy
3. ……

2.【强制】提测流程（分支测试）。
场景说明：对于不是在下次发布时上线的项目，但需要进行测试的，测试同事可直接拉取开发分支进行测试。
分支合并：提测前需确保线上最新的代码（master 分支最后一次发布）已经合并到开发分支。
提交备注：无必要分支合并，没有提交备注要求。 

3.【强制】发布流程。
场景说明：每次版本发布，需要将代码合并到主分支，由主分支推送发布代码。
分支合并：上线前需要将 release 分支合并到 master 分支，合并时务必使用 no fast forward 模式，产生新的提交，并按要求填写提交备注。
提交备注：合并上线时，需要注明上线版本（日期 + 当日发布序号），上线内容。
备注范例：
版本发布：2018.01.01.01
发布内容：
1. 开发 xxx
2. 修复 yyy